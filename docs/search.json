[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "",
    "text": "This section prepares the Python environment with all necessary libraries and configurations. We’ll import data manipulation libraries (pandas, numpy), and visualization tools (matplotlib, seaborn).\n\n\n!conda install -c conda-forge numpy pandas matplotlib seaborn requests pathlib BigQuery\n\n\n\n\n\nShow the code\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport importlib.util\nfrom pathlib import Path\nimport sys\nimport os\nimport requests\nimport io\n\nfrom dotenv import load_dotenv\nload_dotenv()\n\n\nTrue\n\n\n\n\n\n\n\n\n\n\nShow the code\ndef fetch_github(\n    url: str,\n    mode: str = \"private\",\n    token_env_var: str = \"GITHUB_TOKEN\"\n) -&gt; requests.Response:\n    \"\"\"\n    Fetch content from GitHub repositories.\n\n    Args:\n        url: GitHub raw URL (e.g., https://raw.githubusercontent.com/...)\n        mode: \"public\" for public repos, \"private\" for private repos requiring authentication\n        token_env_var: Name of environment variable containing GitHub token (default: GITHUB_TOKEN)\n\n    Returns:\n        requests.Response object\n\n    Raises:\n        ValueError: If token is missing for private mode or invalid mode\n        requests.HTTPError: If request fails\n    \"\"\"\n    # Validate mode\n    if mode not in [\"public\", \"private\"]:\n        raise ValueError(f\"mode must be 'public' or 'private', got '{mode}'\")\n\n    if mode == \"public\":\n        response = requests.get(url, timeout=30)\n    else:\n        token = os.getenv(token_env_var)\n        if not token:\n            raise ValueError(\n                f\"GitHub token not found in environment variable '{token_env_var}'. \"\n                f\"Check your .env file has: {token_env_var}=your_token_here\"\n            )\n\n        headers = {\n            'Authorization': f'token {token}',\n            'Accept': 'application/vnd.github.v3.raw'\n        }\n        response = requests.get(url, headers=headers, timeout=30)\n\n    response.raise_for_status()\n    return response\n\n\n\n\nShow the code\ndef calculate_mode_shares(\n    df,\n    groupby_cols=['Veh_Cat3p', 'Purp5_text', 'PK_OK'],\n    mode_col='Linked_Mode_txt',\n    filter_conditions=None,\n    mode_mapping=None,\n    prefix='calib_share',\n    include_daily_only_purposes=['HBC', 'HBSch']\n):\n    \"\"\"\n    Calculate mode shares with flexible grouping and filtering.\n\n    Parameters:\n    -----------\n    df : DataFrame\n        Input dataframe (OBS or HTS)\n    groupby_cols : list\n        Columns to group by (e.g., ['Veh_Cat3p', 'Purp5_text', 'PK_OK'])\n    mode_col : str\n        Column containing mode information\n    filter_conditions : dict or None\n        Dictionary of {column: value} to filter data before calculation\n        Example: {'Ac_Mode_Model': 'Walk'} for walk-to-transit only\n    mode_mapping : dict or None\n        Map mode values to standard names\n        Example: {'LCL': 'local', 'COR': 'core', ...}\n    prefix : str\n        Prefix for output column names (e.g., 'calib_share')\n    include_daily_only_purposes : list\n        Purposes to aggregate as 'Daily' instead of Peak/OffPeak\n\n    Returns:\n    --------\n    DataFrame with columns: Veh_Cat (0, 1, 2, all) x Purpose x Peak/OffPeak x Mode\n    \"\"\"\n\n    # Make a copy and filter out MicroTransit\n    df_work = df.copy()\n    if 'Mode_Fin' in df_work.columns:\n        df_work = df_work[df_work['Mode_Fin'] != 1]  # Remove MicroTransit\n\n    # Apply additional filters if specified\n    if filter_conditions:\n        for col, val in filter_conditions.items():\n            df_work = df_work[df_work[col] == val]\n\n    # Apply mode mapping if provided\n    if mode_mapping and mode_col in df_work.columns:\n        df_work[mode_col] = df_work[mode_col].map(mode_mapping)\n\n    # Separate daily-only purposes from peak/offpeak purposes\n    df_daily_only = df_work[df_work['Purp5_text'].isin(include_daily_only_purposes)]\n    df_peak_offpeak = df_work[~df_work['Purp5_text'].isin(include_daily_only_purposes)]\n\n    results = []\n\n    # Process Peak/OffPeak purposes\n    if len(df_peak_offpeak) &gt; 0:\n        # Calculate shares for each vehicle category\n        for veh_cat in [0, 1, 2]:\n            df_veh = df_peak_offpeak[df_peak_offpeak['Veh_Cat3p'] == veh_cat]\n\n            for purpose in df_veh['Purp5_text'].unique():\n                df_purp = df_veh[df_veh['Purp5_text'] == purpose]\n\n                for pk in df_purp['PK_OK'].unique():\n                    df_subset = df_purp[df_purp['PK_OK'] == pk]\n\n                    if len(df_subset) &gt; 0:\n                        # Calculate mode shares\n                        mode_counts = df_subset[mode_col].value_counts()\n                        total = mode_counts.sum()\n                        mode_shares = (mode_counts / total).to_dict()\n\n                        # Add to results\n                        for mode, share in mode_shares.items():\n                            results.append({\n                                'Veh_Cat': veh_cat,\n                                'Purpose': purpose,\n                                'Period': pk,\n                                'Mode': mode,\n                                'Share': share\n                            })\n\n        # Calculate shares for \"all\" vehicle categories\n        for purpose in df_peak_offpeak['Purp5_text'].unique():\n            df_purp = df_peak_offpeak[df_peak_offpeak['Purp5_text'] == purpose]\n\n            for pk in df_purp['PK_OK'].unique():\n                df_subset = df_purp[df_purp['PK_OK'] == pk]\n\n                if len(df_subset) &gt; 0:\n                    mode_counts = df_subset[mode_col].value_counts()\n                    total = mode_counts.sum()\n                    mode_shares = (mode_counts / total).to_dict()\n\n                    for mode, share in mode_shares.items():\n                        results.append({\n                            'Veh_Cat': 'all',\n                            'Purpose': purpose,\n                            'Period': pk,\n                            'Mode': mode,\n                            'Share': share\n                        })\n\n    # Process Daily-only purposes\n    if len(df_daily_only) &gt; 0:\n        # Calculate shares for each vehicle category\n        for veh_cat in [0, 1, 2]:\n            df_veh = df_daily_only[df_daily_only['Veh_Cat3p'] == veh_cat]\n\n            for purpose in df_veh['Purp5_text'].unique():\n                df_purp = df_veh[df_veh['Purp5_text'] == purpose]\n\n                if len(df_purp) &gt; 0:\n                    mode_counts = df_purp[mode_col].value_counts()\n                    total = mode_counts.sum()\n                    mode_shares = (mode_counts / total).to_dict()\n\n                    for mode, share in mode_shares.items():\n                        results.append({\n                            'Veh_Cat': veh_cat,\n                            'Purpose': purpose,\n                            'Period': 'Daily',\n                            'Mode': mode,\n                            'Share': share\n                        })\n\n        # Calculate shares for \"all\" vehicle categories\n        for purpose in df_daily_only['Purp5_text'].unique():\n            df_purp = df_daily_only[df_daily_only['Purp5_text'] == purpose]\n\n            if len(df_purp) &gt; 0:\n                mode_counts = df_purp[mode_col].value_counts()\n                total = mode_counts.sum()\n                mode_shares = (mode_counts / total).to_dict()\n\n                for mode, share in mode_shares.items():\n                    results.append({\n                        'Veh_Cat': 'all',\n                        'Purpose': purpose,\n                        'Period': 'Daily',\n                        'Mode': mode,\n                        'Share': share\n                    })\n\n    # Convert to DataFrame\n    df_result = pd.DataFrame(results)\n\n    # Pivot to wide format matching target structure\n    if len(df_result) &gt; 0:\n        df_wide = df_result.pivot_table(\n            index=['Veh_Cat', 'Mode'],\n            columns=['Purpose', 'Period'],\n            values='Share',\n            fill_value=0\n        )\n\n        # Flatten column names\n        df_wide.columns = [f\"{col[0]}_{col[1]}\" for col in df_wide.columns]\n        df_wide = df_wide.reset_index()\n\n        # Create row names matching target format\n        df_wide['variable'] = df_wide.apply(\n            lambda row: f\"{prefix}_{row['Mode'].lower()}_{row['Veh_Cat']}veh\"\n            if row['Veh_Cat'] != 'all'\n            else f\"{prefix}_{row['Mode'].lower()}_all\",\n            axis=1\n        )\n\n        df_wide = df_wide.drop(['Veh_Cat', 'Mode'], axis=1)\n        df_wide = df_wide.set_index('variable')\n\n        return df_wide\n    else:\n        return pd.DataFrame()\n\n\n\n\n\n\n\nShow the code\n# # Import global TDM functions from remote 'Resource' repo\n\n# Fetch and import BigQuery module\nresponse = fetch_github(\n    'https://raw.githubusercontent.com/WFRCAnalytics/Resources/refs/heads/master/2-Python/global-functions/BigQuery.py',\n    mode=\"public\"\n)\n\nBigQuery = importlib.util.module_from_spec(importlib.util.spec_from_loader('BigQuery', loader=None))\nexec(response.text, BigQuery.__dict__)\n\n# Initiatlize BigQuery Client\nclient = BigQuery.getBigQueryClient_Confidential2023UtahHTS()\n\n\npukar.bhandari\nC:/Users/Pukar.Bhandari/.private/confidential-2023-utah-hts-5fd7ddd219a7.json"
  },
  {
    "objectID": "index.html#install-libraries",
    "href": "index.html#install-libraries",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "",
    "text": "!conda install -c conda-forge numpy pandas matplotlib seaborn requests pathlib BigQuery"
  },
  {
    "objectID": "index.html#import-libraries",
    "href": "index.html#import-libraries",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "",
    "text": "Show the code\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport importlib.util\nfrom pathlib import Path\nimport sys\nimport os\nimport requests\nimport io\n\nfrom dotenv import load_dotenv\nload_dotenv()\n\n\nTrue"
  },
  {
    "objectID": "index.html#helper-functions",
    "href": "index.html#helper-functions",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "",
    "text": "Show the code\ndef fetch_github(\n    url: str,\n    mode: str = \"private\",\n    token_env_var: str = \"GITHUB_TOKEN\"\n) -&gt; requests.Response:\n    \"\"\"\n    Fetch content from GitHub repositories.\n\n    Args:\n        url: GitHub raw URL (e.g., https://raw.githubusercontent.com/...)\n        mode: \"public\" for public repos, \"private\" for private repos requiring authentication\n        token_env_var: Name of environment variable containing GitHub token (default: GITHUB_TOKEN)\n\n    Returns:\n        requests.Response object\n\n    Raises:\n        ValueError: If token is missing for private mode or invalid mode\n        requests.HTTPError: If request fails\n    \"\"\"\n    # Validate mode\n    if mode not in [\"public\", \"private\"]:\n        raise ValueError(f\"mode must be 'public' or 'private', got '{mode}'\")\n\n    if mode == \"public\":\n        response = requests.get(url, timeout=30)\n    else:\n        token = os.getenv(token_env_var)\n        if not token:\n            raise ValueError(\n                f\"GitHub token not found in environment variable '{token_env_var}'. \"\n                f\"Check your .env file has: {token_env_var}=your_token_here\"\n            )\n\n        headers = {\n            'Authorization': f'token {token}',\n            'Accept': 'application/vnd.github.v3.raw'\n        }\n        response = requests.get(url, headers=headers, timeout=30)\n\n    response.raise_for_status()\n    return response\n\n\n\n\nShow the code\ndef calculate_mode_shares(\n    df,\n    groupby_cols=['Veh_Cat3p', 'Purp5_text', 'PK_OK'],\n    mode_col='Linked_Mode_txt',\n    filter_conditions=None,\n    mode_mapping=None,\n    prefix='calib_share',\n    include_daily_only_purposes=['HBC', 'HBSch']\n):\n    \"\"\"\n    Calculate mode shares with flexible grouping and filtering.\n\n    Parameters:\n    -----------\n    df : DataFrame\n        Input dataframe (OBS or HTS)\n    groupby_cols : list\n        Columns to group by (e.g., ['Veh_Cat3p', 'Purp5_text', 'PK_OK'])\n    mode_col : str\n        Column containing mode information\n    filter_conditions : dict or None\n        Dictionary of {column: value} to filter data before calculation\n        Example: {'Ac_Mode_Model': 'Walk'} for walk-to-transit only\n    mode_mapping : dict or None\n        Map mode values to standard names\n        Example: {'LCL': 'local', 'COR': 'core', ...}\n    prefix : str\n        Prefix for output column names (e.g., 'calib_share')\n    include_daily_only_purposes : list\n        Purposes to aggregate as 'Daily' instead of Peak/OffPeak\n\n    Returns:\n    --------\n    DataFrame with columns: Veh_Cat (0, 1, 2, all) x Purpose x Peak/OffPeak x Mode\n    \"\"\"\n\n    # Make a copy and filter out MicroTransit\n    df_work = df.copy()\n    if 'Mode_Fin' in df_work.columns:\n        df_work = df_work[df_work['Mode_Fin'] != 1]  # Remove MicroTransit\n\n    # Apply additional filters if specified\n    if filter_conditions:\n        for col, val in filter_conditions.items():\n            df_work = df_work[df_work[col] == val]\n\n    # Apply mode mapping if provided\n    if mode_mapping and mode_col in df_work.columns:\n        df_work[mode_col] = df_work[mode_col].map(mode_mapping)\n\n    # Separate daily-only purposes from peak/offpeak purposes\n    df_daily_only = df_work[df_work['Purp5_text'].isin(include_daily_only_purposes)]\n    df_peak_offpeak = df_work[~df_work['Purp5_text'].isin(include_daily_only_purposes)]\n\n    results = []\n\n    # Process Peak/OffPeak purposes\n    if len(df_peak_offpeak) &gt; 0:\n        # Calculate shares for each vehicle category\n        for veh_cat in [0, 1, 2]:\n            df_veh = df_peak_offpeak[df_peak_offpeak['Veh_Cat3p'] == veh_cat]\n\n            for purpose in df_veh['Purp5_text'].unique():\n                df_purp = df_veh[df_veh['Purp5_text'] == purpose]\n\n                for pk in df_purp['PK_OK'].unique():\n                    df_subset = df_purp[df_purp['PK_OK'] == pk]\n\n                    if len(df_subset) &gt; 0:\n                        # Calculate mode shares\n                        mode_counts = df_subset[mode_col].value_counts()\n                        total = mode_counts.sum()\n                        mode_shares = (mode_counts / total).to_dict()\n\n                        # Add to results\n                        for mode, share in mode_shares.items():\n                            results.append({\n                                'Veh_Cat': veh_cat,\n                                'Purpose': purpose,\n                                'Period': pk,\n                                'Mode': mode,\n                                'Share': share\n                            })\n\n        # Calculate shares for \"all\" vehicle categories\n        for purpose in df_peak_offpeak['Purp5_text'].unique():\n            df_purp = df_peak_offpeak[df_peak_offpeak['Purp5_text'] == purpose]\n\n            for pk in df_purp['PK_OK'].unique():\n                df_subset = df_purp[df_purp['PK_OK'] == pk]\n\n                if len(df_subset) &gt; 0:\n                    mode_counts = df_subset[mode_col].value_counts()\n                    total = mode_counts.sum()\n                    mode_shares = (mode_counts / total).to_dict()\n\n                    for mode, share in mode_shares.items():\n                        results.append({\n                            'Veh_Cat': 'all',\n                            'Purpose': purpose,\n                            'Period': pk,\n                            'Mode': mode,\n                            'Share': share\n                        })\n\n    # Process Daily-only purposes\n    if len(df_daily_only) &gt; 0:\n        # Calculate shares for each vehicle category\n        for veh_cat in [0, 1, 2]:\n            df_veh = df_daily_only[df_daily_only['Veh_Cat3p'] == veh_cat]\n\n            for purpose in df_veh['Purp5_text'].unique():\n                df_purp = df_veh[df_veh['Purp5_text'] == purpose]\n\n                if len(df_purp) &gt; 0:\n                    mode_counts = df_purp[mode_col].value_counts()\n                    total = mode_counts.sum()\n                    mode_shares = (mode_counts / total).to_dict()\n\n                    for mode, share in mode_shares.items():\n                        results.append({\n                            'Veh_Cat': veh_cat,\n                            'Purpose': purpose,\n                            'Period': 'Daily',\n                            'Mode': mode,\n                            'Share': share\n                        })\n\n        # Calculate shares for \"all\" vehicle categories\n        for purpose in df_daily_only['Purp5_text'].unique():\n            df_purp = df_daily_only[df_daily_only['Purp5_text'] == purpose]\n\n            if len(df_purp) &gt; 0:\n                mode_counts = df_purp[mode_col].value_counts()\n                total = mode_counts.sum()\n                mode_shares = (mode_counts / total).to_dict()\n\n                for mode, share in mode_shares.items():\n                    results.append({\n                        'Veh_Cat': 'all',\n                        'Purpose': purpose,\n                        'Period': 'Daily',\n                        'Mode': mode,\n                        'Share': share\n                    })\n\n    # Convert to DataFrame\n    df_result = pd.DataFrame(results)\n\n    # Pivot to wide format matching target structure\n    if len(df_result) &gt; 0:\n        df_wide = df_result.pivot_table(\n            index=['Veh_Cat', 'Mode'],\n            columns=['Purpose', 'Period'],\n            values='Share',\n            fill_value=0\n        )\n\n        # Flatten column names\n        df_wide.columns = [f\"{col[0]}_{col[1]}\" for col in df_wide.columns]\n        df_wide = df_wide.reset_index()\n\n        # Create row names matching target format\n        df_wide['variable'] = df_wide.apply(\n            lambda row: f\"{prefix}_{row['Mode'].lower()}_{row['Veh_Cat']}veh\"\n            if row['Veh_Cat'] != 'all'\n            else f\"{prefix}_{row['Mode'].lower()}_all\",\n            axis=1\n        )\n\n        df_wide = df_wide.drop(['Veh_Cat', 'Mode'], axis=1)\n        df_wide = df_wide.set_index('variable')\n\n        return df_wide\n    else:\n        return pd.DataFrame()"
  },
  {
    "objectID": "index.html#setup-bigquery",
    "href": "index.html#setup-bigquery",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "",
    "text": "Show the code\n# # Import global TDM functions from remote 'Resource' repo\n\n# Fetch and import BigQuery module\nresponse = fetch_github(\n    'https://raw.githubusercontent.com/WFRCAnalytics/Resources/refs/heads/master/2-Python/global-functions/BigQuery.py',\n    mode=\"public\"\n)\n\nBigQuery = importlib.util.module_from_spec(importlib.util.spec_from_loader('BigQuery', loader=None))\nexec(response.text, BigQuery.__dict__)\n\n# Initiatlize BigQuery Client\nclient = BigQuery.getBigQueryClient_Confidential2023UtahHTS()\n\n\npukar.bhandari\nC:/Users/Pukar.Bhandari/.private/confidential-2023-utah-hts-5fd7ddd219a7.json"
  },
  {
    "objectID": "index.html#uta-on-board-survey",
    "href": "index.html#uta-on-board-survey",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "2.1 UTA On-Board Survey",
    "text": "2.1 UTA On-Board Survey\n\n\nShow the code\n# Read Linked UTA On-Board Survey Data directly from GitHub repo\nresponse = fetch_github(\n    \"https://raw.githubusercontent.com/WFRCAnalytics/DATA-OBS-Prep-For-TDM/refs/heads/main/_output/UTA_OBS_2024_Linked.csv\",\n    mode = \"private\"\n)\n\ndf_obs_linked = pd.read_csv(io.StringIO(response.text))\ndf_obs_linked\n\n\nC:\\Users\\Pukar.Bhandari\\AppData\\Local\\Temp\\ipykernel_32324\\4156658631.py:7: DtypeWarning: Columns (8,24,32,37,54,132,137,174) have mixed types. Specify dtype option on import or set low_memory=False.\n  df_obs_linked = pd.read_csv(io.StringIO(response.text))\n\n\n\n\n\n\n\n\n\nID\nDATE_COMPLETED\nDATE_TYPE\nROUTE_DIRECTION_Code\nROUTE_DIRECTION\nROUTE_DIRECTION_Other\nHOME_ADDRESS_CITY\nHOME_ADDRESS_STATE\nHOME_ADDRESS_ZIP\nHOME_ADDRESS_LAT\n...\np_Stop_lat\np_Stop_lon\na_Stop_lat\na_Stop_lon\np_Stop_N\na_Stop_N\naccess_dist\naccess_time\negress_dist\negress_time\n\n\n\n\n0\n5948\n2/27/2024\nWeekday\nUTA_1_2_00\n2 200 SOUTH - TO U HOSPITAL\nNaN\nClearfield\nUT\n84015\n41.119565\n...\n41.118979\n-112.025922\n40.769221\n-111.898663\n27702\n25493\n0.37\n0.148000\n0.68\n0.27200\n\n\n1\n6067\n2/27/2024\nWeekday\nUTA_1_47_00\n47 4700 SOUTH - TO W VALLEY CTL\nNaN\nWest Valley City\nUT\n84119\n40.689590\n...\n40.689384\n-111.967476\n40.660941\n-111.899443\n23195\n23685\n0.56\n0.224000\n0.24\n0.09600\n\n\n2\n6069\n3/16/2024\nSaturday\nUTA_1_750_01\nFRONTRUNNER 750 - SOUTHBOUND\nNaN\nOgden\nUT\n84401\n41.186697\n...\n41.188757\n-112.039378\n40.784356\n-111.982117\n10042\n15093\n1.36\n0.050671\n0.20\n0.08000\n\n\n3\n6073\n2/28/2024\nWeekday\nUTA_1_750_01\nFRONTRUNNER 750 - SOUTHBOUND\nNaN\nOgden\nUT\n84401\n41.236749\n...\n41.188757\n-112.039378\n40.659758\n-111.896432\n10042\n10016\n4.17\n0.136991\n1.66\n0.07316\n\n\n4\n6077\n2/28/2024\nWeekday\nUTA_1_47_00\n47 4700 SOUTH - TO W VALLEY CTL\nNaN\nWest Valley City\nUT\n84119\n40.669687\n...\n40.667711\n-111.961123\n40.681907\n-112.024041\n22922\n22421\n0.25\n0.100000\n0.49\n0.19600\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n13790\n30339\n4/26/2024\nWeekday\nUTA_1_704_01\nTRAX GREEN LINE 704 - TO AIRPORT\nNaN\nSalt Lake City\nUT\n84116\n40.772420\n...\n40.771536\n-111.945736\n40.771502\n-111.914486\n15101\n15122\n0.31\n0.124000\n0.17\n0.06800\n\n\n13791\n30340\n4/26/2024\nWeekday\nUTA_1_704_00\nTRAX GREEN LINE 704 - TO WEST VALLEY\nNaN\nSalt Lake City\nUT\n84116\n40.771361\n...\n40.771505\n-111.915361\n40.750058\n-111.896818\n25266\n15109\n0.30\n0.120000\n1.21\n0.48400\n\n\n13792\n30341\n4/26/2024\nWeekday\nUTA_1_704_00\nTRAX GREEN LINE 704 - TO WEST VALLEY\nNaN\nSalt Lake City\nUT\n84116\n40.773232\n...\n40.771505\n-111.915361\n40.725345\n-111.877499\n25266\n24968\n0.19\n0.076000\n0.86\n0.34400\n\n\n13793\n1000002\n2/29/2024\nWeekday\nUTA_1_701_00\nTRAX BLUE LINE 701 - TO DRAPER\nNaN\nSalt Lake City\nUT\n84111\n40.751607\n...\n40.755113\n-111.891095\n40.674859\n-111.943134\n15123\n23342\n0.33\n0.132000\n0.29\n0.11600\n\n\n13794\n1000004\n2/29/2024\nWeekday\nUTA_1_701_00\nTRAX BLUE LINE 701 - TO DRAPER\nNaN\nSalt Lake City\nUT\n84109\n40.722068\n...\n40.725878\n-111.830935\n40.525496\n-111.858805\n25663\n15041\n0.79\n0.316000\n0.19\n0.07600\n\n\n\n\n13795 rows × 301 columns"
  },
  {
    "objectID": "index.html#household-travel-survey",
    "href": "index.html#household-travel-survey",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "2.2 Household Travel Survey",
    "text": "2.2 Household Travel Survey\n\n\nShow the code\n# Load Linked Trips data from 2023 Household Travel Survey\ndf_hts_linked = client.query(\n    \"SELECT * FROM \" + 'wfrc-modeling-data.prd_tdm_hts_2023.trip_linked'\n).to_dataframe()\n\ndf_hts_linked\n\n\n\n\n\n\n\n\n\nunique_id\nlinked_trip_id\nhh_id\nperson_id\nday_id\nday_weight\nperson_num\nday_num\nparticipation_group\ndiary_platform\n...\ndCO_TAZID_USTMv3\npCO_TAZID_USTMv3\naCO_TAZID_USTMv3\noCO_TAZID_USTMv4\ndCO_TAZID_USTMv4\npCO_TAZID_USTMv4\naCO_TAZID_USTMv4\npSUBAREAID\naSUBAREAID\ntrip_weight\n\n\n\n\n0\n5facab93-0b23-480f-b69a-70a9d611427c\n2302328301010100\n23023283\n2302328301\n230232830101\n785.318580\n1\n1\n1\nbrowser\n...\n530200.0\n530278.0\n530200.0\n530297.0\n530323.0\n530297.0\n530323.0\n3.0\n3.0\n785.318580\n\n\n1\n27d90255-4acc-42fb-82a7-62e249f739b8\n2303463801020900\n23034638\n2303463801\n230346380102\n0.000000\n1\n2\n9\nrmove\n...\n490777.0\n490777.0\n490723.0\n490750.0\n490757.0\n490757.0\n490750.0\n1.0\n1.0\n0.000000\n\n\n2\n3808484f-788b-48e5-a5e1-dba3eec264fa\n2304417802020100\n23044178\n2304417802\n230441780202\n79.325700\n2\n2\n9\nrmove\n...\n350673.0\n350673.0\n350197.0\n350197.0\n350673.0\n350673.0\n350197.0\n1.0\n1.0\n79.325700\n\n\n3\n76bc4c44-e8f4-47ff-9c3d-36959467a428\n2305261901070200\n23052619\n2305261901\n230526190107\n508.569360\n1\n7\n9\nrmove\n...\n490774.0\n490774.0\n490723.0\n490750.0\n490754.0\n490754.0\n490750.0\n1.0\n1.0\n508.569360\n\n\n4\n4a68e37e-5f7e-4a2b-9448-08ec36f3d318\n2307491602030100\n23074916\n2307491602\n230749160203\n0.000000\n2\n3\n9\nrmove\n...\n490497.0\n490497.0\n490632.0\n490715.0\n490455.0\n490455.0\n490715.0\n1.0\n1.0\n0.000000\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n13112\n1019ad4d-6732-45a1-a991-e5a3be830883\n2348141901030100\n23481419\n2348141901\n234814190103\n21.199747\n1\n3\n9\nrmove\n...\n350187.0\n350187.0\n350189.0\n350189.0\n350187.0\n350187.0\n350189.0\n1.0\n1.0\n21.199747\n\n\n13113\nadfacfa2-2f88-462d-b7de-17066fa37ece\n2348219501010100\n23482195\n2348219501\n234821950101\n68.644470\n1\n1\n9\nrmove\n...\n350562.0\n350562.0\n350562.0\n350562.0\n350562.0\n350562.0\n350562.0\n1.0\n1.0\n68.644470\n\n\n13114\n5c5d7f99-8bb5-49bb-8eb0-2447e9f2abfc\n2348502802010200\n23485028\n2348502802\n234850280201\n0.000000\n2\n1\n9\nrmove\n...\n351014.0\n351203.0\n351014.0\n351203.0\n351014.0\n351203.0\n351014.0\n1.0\n1.0\n0.000000\n\n\n13115\ne136d377-68a2-4086-8b89-3a030fdc1ab7\n2348561501010100\n23485615\n2348561501\n234856150101\n32.566605\n1\n1\n1\nbrowser\n...\n350253.0\n350368.0\n350253.0\n350368.0\n350253.0\n350368.0\n350253.0\n1.0\n1.0\n39.079926\n\n\n13116\ne1ba708e-8925-4357-9720-5dec0b126809\n2348838901050200\n23488389\n2348838901\n234883890105\n22.466323\n1\n5\n9\nrmove\n...\n110049.0\n110049.0\n110053.0\n110053.0\n110049.0\n110049.0\n110053.0\n1.0\n1.0\n22.466323\n\n\n\n\n232451 rows × 109 columns"
  },
  {
    "objectID": "index.html#on-board-survey",
    "href": "index.html#on-board-survey",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "4.1 On-Board Survey",
    "text": "4.1 On-Board Survey\n\nTrip Purposes\n\n\nShow the code\ndf_obs_linked[\"Purp5_text\"].value_counts() # Trip Purpose: HBW, HBO, HBC, NHB, HBSch\n\n\nPurp5_text\nHBW      5221\nHBO      4779\nHBC      2358\nNHB      1113\nHBSch     324\nName: count, dtype: int64\n\n\n\n\nPeak vs Off-Peak\n\n\nShow the code\ndf_obs_linked[\"PK_OK\"].value_counts() # Peak vs Off-Peak\n\n\nPK_OK\nOK    7656\nPK    6139\nName: count, dtype: int64\n\n\n\n\nMotorized vs Non-motorized\n\n\nShow the code\ndf_obs_linked[\"Ac_Mode_Model\"].value_counts() # Motorized (Drive) vs Non-motorized (Walk)\n\n\nAc_Mode_Model\nWalk     11016\nDrive     2779\nName: count, dtype: int64\n\n\n\n\nVehicle Ownership\n\n\nShow the code\ndf_obs_linked[\"Veh_Cat3p\"].value_counts() # Vehile Ownership Category: 0, 1, 2, 3+\n\n\nVeh_Cat3p\n0    4251\n1    3877\n2    3358\n3    2309\nName: count, dtype: int64"
  },
  {
    "objectID": "index.html#non-motorized-trips-walk-vs-bike",
    "href": "index.html#non-motorized-trips-walk-vs-bike",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "5.1 Non-motorized Trips: Walk vs Bike",
    "text": "5.1 Non-motorized Trips: Walk vs Bike"
  },
  {
    "objectID": "index.html#motorized-trips-auto-vs-transit",
    "href": "index.html#motorized-trips-auto-vs-transit",
    "title": "Calculating the Mode Choice Calibration Parameters",
    "section": "5.2 Motorized Trips: Auto vs Transit",
    "text": "5.2 Motorized Trips: Auto vs Transit\n\nAuto Trips: Drive Alone vs Shared Rides\n\nShared Rides: 2 People vs 3+ People\n\n\n\nTransit Trips: By Service and By Access Mode\n\nBy Service Type\n\n\nShow the code\ndf_obs_linked[[\n    \"Linked_Mode_txt\", # Linked Mode: MT = MicroTransit (dont need), LCL = local bus, COR = Core Bus, EXP = Express Bus, LRT = Light Rail Transit (TRAX), CRT = Commuter Rail Transit (FrontRunner), BRT = Bus Rapid Transit (OVX, UVX)\n    \"Purp5_text\", # Trip Purpose: HBW = Home-based Work, HBO = Home-based Other, HBC = Home-based College, NHB = Non-home based, HBSch = Home-based School\n    \"PK_OK\", # Peak vs OffPeak\n    \"Veh_Cat3p\", # Vehicle Ownership: 0 = 0 Vehicle Household, 1 = 1 Vehicle Household, 2 = 2 Vehicle Household, 3 = 3+ Vehicle Household\n    \"Mode_Fin\", # Current Mode: 1 = MT = MicroTransit (Dont need),  4 = LCL = local bus, 5 = COR = Core Bus, 6 = EXP = Express Bus, 7 = LRT = Light Rail Transit (TRAX), 8 = CRT = Commuter Rail Transit, 9 = BRT = Bus Rapid Transit (OVX, UVX)\n    \"Ac_Mode_Model\", # Access Mode to Transit: Walk (Walk to Transit), Drive (Drive to Transit)\n]].describe()\n\n\n\n\n\n\n\n\n\nVeh_Cat3p\nMode_Fin\n\n\n\n\ncount\n13795.000000\n13795.000000\n\n\nmean\n1.270025\n5.927510\n\n\nstd\n1.071571\n1.875096\n\n\nmin\n0.000000\n1.000000\n\n\n25%\n0.000000\n4.000000\n\n\n50%\n1.000000\n7.000000\n\n\n75%\n2.000000\n7.000000\n\n\nmax\n3.000000\n9.000000\n\n\n\n\n\n\n\n\n\nShow the code\n# Mode mapping for service types\nservice_type_mapping = {\n    'LCL': 'local',\n    'COR': 'core',\n    'EXP': 'express',\n    'LRT': 'lrt',\n    'CRT': 'crt',\n    'BRT': 'brt'\n}\n\ndf_transit_by_service = calculate_mode_shares(\n    df=df_obs_linked,\n    mode_col='Linked_Mode_txt',\n    filter_conditions=None,  # Use all transit trips\n    mode_mapping=service_type_mapping,\n    prefix='calib_share'\n)\n\nprint(\"Transit by Service Type:\")\ndisplay(df_transit_by_service)\n\n\nTransit by Service Type:\n\n\n\n\n\n\n\n\n\nHBC_Daily\nHBO_OK\nHBO_PK\nHBSch_Daily\nHBW_OK\nHBW_PK\nNHB_OK\nNHB_PK\n\n\nvariable\n\n\n\n\n\n\n\n\n\n\n\n\ncalib_share_brt_0veh\n0.235849\n0.088020\n0.097946\n0.032258\n0.048316\n0.055925\n0.092715\n0.072289\n\n\ncalib_share_crt_0veh\n0.023585\n0.014670\n0.020537\n0.000000\n0.023426\n0.015979\n0.013245\n0.000000\n\n\ncalib_share_express_0veh\n0.002358\n0.000000\n0.001580\n0.000000\n0.000000\n0.001332\n0.000000\n0.006024\n\n\ncalib_share_local_0veh\n0.620283\n0.600652\n0.631912\n0.870968\n0.672035\n0.732357\n0.566225\n0.608434\n\n\ncalib_share_lrt_0veh\n0.117925\n0.296659\n0.248025\n0.096774\n0.256223\n0.194407\n0.327815\n0.313253\n\n\ncalib_share_brt_1veh\n0.241987\n0.058201\n0.053398\n0.032258\n0.042120\n0.034335\n0.107527\n0.084034\n\n\ncalib_share_crt_1veh\n0.057692\n0.058201\n0.067961\n0.021505\n0.058424\n0.067597\n0.032258\n0.067227\n\n\ncalib_share_express_1veh\n0.000000\n0.000000\n0.000000\n0.000000\n0.005435\n0.008584\n0.005376\n0.000000\n\n\ncalib_share_local_1veh\n0.491987\n0.509259\n0.480583\n0.849462\n0.576087\n0.599785\n0.510753\n0.495798\n\n\ncalib_share_lrt_1veh\n0.208333\n0.374339\n0.398058\n0.096774\n0.317935\n0.289700\n0.344086\n0.352941\n\n\ncalib_share_brt_2veh\n0.194313\n0.058140\n0.047244\n0.032787\n0.027586\n0.041835\n0.153226\n0.046875\n\n\ncalib_share_crt_2veh\n0.072670\n0.063953\n0.068241\n0.016393\n0.091379\n0.098516\n0.040323\n0.015625\n\n\ncalib_share_express_2veh\n0.000000\n0.000000\n0.002625\n0.000000\n0.008621\n0.016194\n0.000000\n0.000000\n\n\ncalib_share_local_2veh\n0.500790\n0.443314\n0.519685\n0.844262\n0.482759\n0.527665\n0.451613\n0.562500\n\n\ncalib_share_lrt_2veh\n0.232227\n0.434593\n0.362205\n0.106557\n0.389655\n0.315789\n0.354839\n0.375000\n\n\ncalib_share_brt_all\n0.216929\n0.069453\n0.070823\n0.032362\n0.040336\n0.043199\n0.110000\n0.086207\n\n\ncalib_share_crt_all\n0.060400\n0.048875\n0.052663\n0.029126\n0.067647\n0.069975\n0.025714\n0.027094\n\n\ncalib_share_express_all\n0.000851\n0.000000\n0.001211\n0.000000\n0.005462\n0.009996\n0.001429\n0.002463\n\n\ncalib_share_local_all\n0.515100\n0.519936\n0.549031\n0.847896\n0.565126\n0.606569\n0.518571\n0.559113\n\n\ncalib_share_lrt_all\n0.206721\n0.361736\n0.326271\n0.090615\n0.321429\n0.270261\n0.344286\n0.325123\n\n\n\n\n\n\n\n\n\nBy Access Mode: Walk vs Drive to Transit\n\n\nShow the code\naccess_type_mapping = {\n    'Walk': 'walk-to-transit',\n    'Drive': 'drive-to-transit'\n}\n\ndf_transit_by_access = calculate_mode_shares(\n    df=df_obs_linked,\n    mode_col='Ac_Mode_Model',\n    filter_conditions=None,  # Use all transit trips\n    mode_mapping=access_type_mapping,\n    prefix='calib_share'\n)\n\nprint(\"\\nTransit by Access Type:\")\ndisplay(df_transit_by_access)\n\n\n\nTransit by Access Type:\n\n\n\n\n\n\n\n\n\nHBC_Daily\nHBO_OK\nHBO_PK\nHBSch_Daily\nHBW_OK\nHBW_PK\nNHB_OK\nNHB_PK\n\n\nvariable\n\n\n\n\n\n\n\n\n\n\n\n\ncalib_share_drive-to-transit_0veh\n0.035294\n0.045640\n0.055292\n0.032258\n0.037956\n0.038513\n0.039604\n0.018072\n\n\ncalib_share_walk-to-transit_0veh\n0.964706\n0.954360\n0.944708\n0.967742\n0.962044\n0.961487\n0.960396\n0.981928\n\n\ncalib_share_drive-to-transit_1veh\n0.217949\n0.171958\n0.179612\n0.064516\n0.168022\n0.194206\n0.053763\n0.067227\n\n\ncalib_share_walk-to-transit_1veh\n0.782051\n0.828042\n0.820388\n0.935484\n0.831978\n0.805794\n0.946237\n0.932773\n\n\ncalib_share_drive-to-transit_2veh\n0.380126\n0.267442\n0.251969\n0.172131\n0.288165\n0.356275\n0.048387\n0.109375\n\n\ncalib_share_walk-to-transit_2veh\n0.619874\n0.732558\n0.748031\n0.827869\n0.711835\n0.643725\n0.951613\n0.890625\n\n\ncalib_share_drive-to-transit_all\n0.324692\n0.171061\n0.165860\n0.116505\n0.199413\n0.225829\n0.048502\n0.068966\n\n\ncalib_share_walk-to-transit_all\n0.675308\n0.828939\n0.834140\n0.883495\n0.800587\n0.774171\n0.951498\n0.931034\n\n\n\n\n\n\n\n\nWalk to Transit\n\n\nShow the code\ndf_walk_transit_by_service = calculate_mode_shares(\n    df=df_obs_linked,\n    mode_col='Linked_Mode_txt',\n    filter_conditions={'Ac_Mode_Model': 'Walk'},\n    mode_mapping={\n        'LCL': 'walk-local',\n        'COR': 'walk-core',\n        'EXP': 'walk-express',\n        'LRT': 'walk-lrt',\n        'CRT': 'walk-crt',\n        'BRT': 'walk-brt'\n    },\n    prefix='calib_share'\n)\n\nprint(\"\\nWalk-to-Transit by Service Type:\")\ndisplay(df_walk_transit_by_service)\n\n\n\nWalk-to-Transit by Service Type:\n\n\n\n\n\n\n\n\n\nHBC_Daily\nHBO_OK\nHBO_PK\nHBSch_Daily\nHBW_OK\nHBW_PK\nNHB_OK\nNHB_PK\n\n\nvariable\n\n\n\n\n\n\n\n\n\n\n\n\ncalib_share_walk-brt_0veh\n0.242054\n0.091375\n0.102007\n0.033333\n0.050228\n0.058091\n0.093103\n0.073620\n\n\ncalib_share_walk-crt_0veh\n0.007335\n0.008540\n0.008361\n0.000000\n0.022831\n0.011065\n0.003448\n0.000000\n\n\ncalib_share_walk-express_0veh\n0.002445\n0.000000\n0.001672\n0.000000\n0.000000\n0.001383\n0.000000\n0.006135\n\n\ncalib_share_walk-local_0veh\n0.633252\n0.618275\n0.650502\n0.900000\n0.687976\n0.744122\n0.582759\n0.607362\n\n\ncalib_share_walk-lrt_0veh\n0.114914\n0.281810\n0.237458\n0.066667\n0.238965\n0.185339\n0.320690\n0.312883\n\n\ncalib_share_walk-brt_1veh\n0.247951\n0.067093\n0.065089\n0.022989\n0.044118\n0.037284\n0.113636\n0.090090\n\n\ncalib_share_walk-crt_1veh\n0.014344\n0.014377\n0.014793\n0.000000\n0.037582\n0.027963\n0.017045\n0.045045\n\n\ncalib_share_walk-express_1veh\n0.000000\n0.000000\n0.000000\n0.000000\n0.003268\n0.003995\n0.005682\n0.000000\n\n\ncalib_share_walk-local_1veh\n0.547131\n0.570288\n0.532544\n0.896552\n0.650327\n0.681758\n0.522727\n0.522523\n\n\ncalib_share_walk-lrt_1veh\n0.190574\n0.348243\n0.387574\n0.080460\n0.264706\n0.249001\n0.340909\n0.342342\n\n\ncalib_share_walk-brt_2veh\n0.178571\n0.071429\n0.052632\n0.019802\n0.033981\n0.041929\n0.144068\n0.052632\n\n\ncalib_share_walk-crt_2veh\n0.010204\n0.021825\n0.014035\n0.000000\n0.029126\n0.039832\n0.025424\n0.000000\n\n\ncalib_share_walk-express_2veh\n0.000000\n0.000000\n0.000000\n0.000000\n0.000000\n0.008386\n0.000000\n0.000000\n\n\ncalib_share_walk-local_2veh\n0.596939\n0.553571\n0.631579\n0.920792\n0.599515\n0.666667\n0.474576\n0.561404\n\n\ncalib_share_walk-lrt_2veh\n0.214286\n0.353175\n0.301754\n0.059406\n0.337379\n0.243187\n0.355932\n0.385965\n\n\ncalib_share_walk-brt_all\n0.215501\n0.079907\n0.082003\n0.025641\n0.045168\n0.047487\n0.109610\n0.089947\n\n\ncalib_share_walk-crt_all\n0.010712\n0.013964\n0.010885\n0.003663\n0.030987\n0.029507\n0.010511\n0.015873\n\n\ncalib_share_walk-express_all\n0.000630\n0.000000\n0.000726\n0.000000\n0.001576\n0.004149\n0.001502\n0.002646\n\n\ncalib_share_walk-local_all\n0.599874\n0.589604\n0.613933\n0.904762\n0.650735\n0.701245\n0.536036\n0.576720\n\n\ncalib_share_walk-lrt_all\n0.173283\n0.316524\n0.292453\n0.065934\n0.271534\n0.217612\n0.342342\n0.314815\n\n\n\n\n\n\n\n\n\nDrive to Transit\n\n\nShow the code\ndf_drive_transit_by_service = calculate_mode_shares(\n    df=df_obs_linked,\n    mode_col='Linked_Mode_txt',\n    filter_conditions={'Ac_Mode_Model': 'Drive'},\n    mode_mapping={\n        'LCL': 'drive-local',\n        'COR': 'drive-core',\n        'EXP': 'drive-express',\n        'LRT': 'drive-lrt',\n        'CRT': 'drive-crt',\n        'BRT': 'drive-brt'\n    },\n    prefix='calib_share'\n)\n\nprint(\"\\nDrive-to-Transit by Service Type:\")\ndisplay(df_drive_transit_by_service)\n\n\n\nDrive-to-Transit by Service Type:\n\n\n\n\n\n\n\n\n\nHBC_Daily\nHBO_OK\nHBO_PK\nHBSch_Daily\nHBW_OK\nHBW_PK\nNHB_OK\nNHB_PK\n\n\nvariable\n\n\n\n\n\n\n\n\n\n\n\n\ncalib_share_drive-brt_0veh\n0.066667\n0.017857\n0.028571\n0.000000\n0.000000\n0.000000\n0.083333\n0.000000\n\n\ncalib_share_drive-crt_0veh\n0.466667\n0.142857\n0.228571\n0.000000\n0.038462\n0.142857\n0.250000\n0.000000\n\n\ncalib_share_drive-local_0veh\n0.266667\n0.232143\n0.314286\n0.000000\n0.269231\n0.428571\n0.166667\n0.666667\n\n\ncalib_share_drive-lrt_0veh\n0.200000\n0.607143\n0.428571\n1.000000\n0.692308\n0.428571\n0.500000\n0.333333\n\n\ncalib_share_drive-brt_1veh\n0.220588\n0.015385\n0.000000\n0.166667\n0.032258\n0.022099\n0.000000\n0.000000\n\n\ncalib_share_drive-crt_1veh\n0.213235\n0.269231\n0.310811\n0.333333\n0.161290\n0.232044\n0.300000\n0.375000\n\n\ncalib_share_drive-express_1veh\n0.000000\n0.000000\n0.000000\n0.000000\n0.016129\n0.027624\n0.000000\n0.000000\n\n\ncalib_share_drive-local_1veh\n0.294118\n0.215385\n0.243243\n0.166667\n0.209677\n0.259669\n0.300000\n0.125000\n\n\ncalib_share_drive-lrt_1veh\n0.272059\n0.500000\n0.445946\n0.333333\n0.580645\n0.458564\n0.400000\n0.500000\n\n\ncalib_share_drive-brt_2veh\n0.219917\n0.021739\n0.031250\n0.095238\n0.011905\n0.041667\n0.333333\n0.000000\n\n\ncalib_share_drive-crt_2veh\n0.174274\n0.179348\n0.229167\n0.095238\n0.244048\n0.204545\n0.333333\n0.142857\n\n\ncalib_share_drive-express_2veh\n0.000000\n0.000000\n0.010417\n0.000000\n0.029762\n0.030303\n0.000000\n0.000000\n\n\ncalib_share_drive-local_2veh\n0.344398\n0.141304\n0.187500\n0.476190\n0.196429\n0.276515\n0.000000\n0.571429\n\n\ncalib_share_drive-lrt_2veh\n0.261411\n0.657609\n0.541667\n0.333333\n0.517857\n0.446970\n0.333333\n0.285714\n\n\ncalib_share_drive-brt_all\n0.219895\n0.018797\n0.014599\n0.083333\n0.021008\n0.028481\n0.117647\n0.035714\n\n\ncalib_share_drive-crt_all\n0.163613\n0.218045\n0.262774\n0.222222\n0.214286\n0.208861\n0.323529\n0.178571\n\n\ncalib_share_drive-express_all\n0.001309\n0.000000\n0.003650\n0.000000\n0.021008\n0.030063\n0.000000\n0.000000\n\n\ncalib_share_drive-local_all\n0.339005\n0.182331\n0.222628\n0.416667\n0.222689\n0.281646\n0.176471\n0.321429\n\n\ncalib_share_drive-lrt_all\n0.276178\n0.580827\n0.496350\n0.277778\n0.521008\n0.450949\n0.382353\n0.464286\n\n\n\n\n\n\n\n\n\nShow the code\n# Concatenate all results\ndf_all_transit_shares = pd.concat([\n    df_transit_by_service,\n    df_transit_by_access,\n    df_walk_transit_by_service,\n    df_drive_transit_by_service\n], axis=0)\n\nprint(\"\\nAll Transit Shares Combined:\")\ndisplay(df_all_transit_shares)\n\n\n\nAll Transit Shares Combined:\n\n\n\n\n\n\n\n\n\nHBC_Daily\nHBO_OK\nHBO_PK\nHBSch_Daily\nHBW_OK\nHBW_PK\nNHB_OK\nNHB_PK\n\n\nvariable\n\n\n\n\n\n\n\n\n\n\n\n\ncalib_share_brt_0veh\n0.235849\n0.088020\n0.097946\n0.032258\n0.048316\n0.055925\n0.092715\n0.072289\n\n\ncalib_share_crt_0veh\n0.023585\n0.014670\n0.020537\n0.000000\n0.023426\n0.015979\n0.013245\n0.000000\n\n\ncalib_share_express_0veh\n0.002358\n0.000000\n0.001580\n0.000000\n0.000000\n0.001332\n0.000000\n0.006024\n\n\ncalib_share_local_0veh\n0.620283\n0.600652\n0.631912\n0.870968\n0.672035\n0.732357\n0.566225\n0.608434\n\n\ncalib_share_lrt_0veh\n0.117925\n0.296659\n0.248025\n0.096774\n0.256223\n0.194407\n0.327815\n0.313253\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\ncalib_share_drive-brt_all\n0.219895\n0.018797\n0.014599\n0.083333\n0.021008\n0.028481\n0.117647\n0.035714\n\n\ncalib_share_drive-crt_all\n0.163613\n0.218045\n0.262774\n0.222222\n0.214286\n0.208861\n0.323529\n0.178571\n\n\ncalib_share_drive-express_all\n0.001309\n0.000000\n0.003650\n0.000000\n0.021008\n0.030063\n0.000000\n0.000000\n\n\ncalib_share_drive-local_all\n0.339005\n0.182331\n0.222628\n0.416667\n0.222689\n0.281646\n0.176471\n0.321429\n\n\ncalib_share_drive-lrt_all\n0.276178\n0.580827\n0.496350\n0.277778\n0.521008\n0.450949\n0.382353\n0.464286\n\n\n\n\n67 rows × 8 columns"
  }
]